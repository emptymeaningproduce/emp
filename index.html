<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>emp</title>
  <style>
    :root{
      --pad: 24px;
      --max: 900px;
      --linkSize: 14px;
      --headingSize: 14px;
    }

    html, body{
      height: 100%;
      margin: 0;
      background: #fff;
      color: #000;
      font-family: Arial, Helvetica, sans-serif;
    }

    /* Scroll container (loops up/down) */
    #loop{
      height: 100vh;
      overflow-y: auto;
      overscroll-behavior: none;
      -webkit-overflow-scrolling: touch;
    }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 40px var(--pad);
    }

    /* Centered big logo */
    .logo{
      width: 640px;
      max-width: 92vw;
      height: auto;
      display: block;
      margin: 20px auto 28px;
    }

    /* Keep links left aligned under centered logo */
    .links{
      text-align: left;
    }

    h3{
      font-size: var(--headingSize);
      font-weight: 700;
      margin: 22px 0 8px;
    }

    a{
      display: block;
      font-size: var(--linkSize);
      margin: 6px 0;
      color: #00f;
      text-decoration: underline;
    }

    .spacer{ height: 10px; }

    a:focus{
      outline: 2px dotted #000;
      outline-offset: 2px;
    }

    /* Music control */
    .music{
      position: fixed;
      right: 14px;
      bottom: 14px;
      z-index: 9999;
      display: flex;
      gap: 8px;
      align-items: center;
      background: rgba(255,255,255,0.9);
      border: 1px solid #000;
      padding: 8px 10px;
      border-radius: 8px;
    }

    .music button{
      font: inherit;
      font-size: 13px;
      border: 1px solid #000;
      background: #fff;
      padding: 6px 10px;
      cursor: pointer;
    }

    .music button:active{
      transform: translateY(1px);
    }

    .music .label{
      font-size: 13px;
    }
  </style>
</head>
<body>
  <!-- Audio element -->
  <audio id="bgm" src="emp_sound.mp3" loop preload="auto"></audio>

  <!-- Control (user gesture enables sound reliably) -->
  <div class="music">
    <span class="label" id="musicLabel">BGM: OFF</span>
    <button id="musicBtn" type="button">Play</button>
  </div>

  <div id="loop">
    <div id="stage"></div>

    <template id="tpl">
      <div class="wrap">
        <img class="logo" src="logo.png" alt="Logo" />

        <div class="links">
          <h3>MERCH</h3>
          <a href="https://example.com">MERCH</a>

          <div class="spacer"></div>

          <h3>NEW</h3>
          <a href="https://example.com">Track 1</a>
          <a href="https://example.com">Track 2</a>

          <h3>MIXTAPES</h3>
          <a href="https://example.com">Mixtape 1</a>
          <a href="https://example.com">Mixtape 2</a>

          <h3>OTHER PLATFORMS</h3>
          <a href="https://youtube.com">YouTube</a>
          <a href="https://www.instagram.com/mokyofuckyo">Instagram</a>
          <a href="https://soundcloud.com">SoundCloud</a>

          <h3>CONTACT</h3>
          <a href="mailto:emptymeaningproduce@gmail.com">emptymeaningproduce@gmail.com</a>
        </div>
      </div>
    </template>
  </div>

  <script>
    (function(){
      // ===== Infinite scroll (up/down) =====
      const loop = document.getElementById("loop");
      const stage = document.getElementById("stage");
      const tpl = document.getElementById("tpl");

      const copies = [];
      for(let i=0;i<3;i++){
        const node = tpl.content.cloneNode(true);
        const wrapper = document.createElement("div");
        wrapper.className = "copy";
        wrapper.appendChild(node);
        stage.appendChild(wrapper);
        copies.push(wrapper);
      }

      function getCopyHeight(){
        return copies[0].getBoundingClientRect().height;
      }

      function centerScroll(){
        const h = getCopyHeight();
        loop.scrollTop = h;
      }

      function onScroll(){
        const h = getCopyHeight();
        const y = loop.scrollTop;
        const threshold = 200;

        if(y < threshold){
          loop.scrollTop = y + h;
          return;
        }

        const maxY = loop.scrollHeight - loop.clientHeight;
        if(maxY - y < threshold){
          loop.scrollTop = y - h;
          return;
        }
      }

      window.addEventListener("load", () => {
        centerScroll();
        loop.addEventListener("scroll", onScroll, { passive: true });
      });

      window.addEventListener("resize", () => {
        centerScroll();
      });

      // ===== Background music =====
      const audio = document.getElementById("bgm");
      const btn = document.getElementById("musicBtn");
      const label = document.getElementById("musicLabel");

      function setUI(isPlaying){
        label.textContent = isPlaying ? "BGM: ON" : "BGM: OFF";
        btn.textContent = isPlaying ? "Pause" : "Play";
      }

      async function toggleMusic(){
        try{
          if(audio.paused){
            await audio.play();
            setUI(true);
          }else{
            audio.pause();
            setUI(false);
          }
        }catch(e){
          setUI(false);
        }
      }

      btn.addEventListener("click", () => {
        audio.muted = false;
        toggleMusic();
      });

      // Optional: try muted autoplay first (silent)
      window.addEventListener("load", async () => {
        try{
          audio.muted = true;
          await audio.play();
          setUI(false);
        }catch(e){
          setUI(false);
        }
      });
    })();
  </script>
</body>
</html>
